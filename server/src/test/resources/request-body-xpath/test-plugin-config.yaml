plugin: "io.gatehill.imposter.plugin.test.TestPluginImpl"

resources:
- method: POST
  path: /example
  requestBody:
    xPath: "/env:Envelope/env:Body/pets:animal/pets:name"
    value: "Fluffy"
    xmlNamespaces:
      env: "http://schemas.xmlsoap.org/soap/envelope/"
      pets: "urn:com:example:petstore"
  response:
    statusCode: 204

- method: POST
  path: /example
  requestBody:
    xPath: "/env:Envelope/env:Body/pets:animal/pets:id"
    value: 3
    xmlNamespaces:
      env: "http://schemas.xmlsoap.org/soap/envelope/"
      pets: "urn:com:example:petstore"
  response:
    statusCode: 302

- method: POST
  path: /example-nonmatch
  requestBody:
    xPath: "/env:Envelope/env:Body/pets:animal/pets:nothing"
    # tilde is YAML for null
    value: ~
    xmlNamespaces:
      env: "http://schemas.xmlsoap.org/soap/envelope/"
      pets: "urn:com:example:petstore"
  response:
    statusCode: 409

- method: POST
  path: /example-exists
  requestBody:
    xPath: "/env:Envelope/env:Body/pets:animal/pets:id"
    exists: true
    xmlNamespaces:
      env: "http://schemas.xmlsoap.org/soap/envelope/"
      pets: "urn:com:example:petstore"
  response:
    statusCode: 201

- method: POST
  path: /example-not-exists
  requestBody:
    xPath: "/env:Envelope/env:Body/pets:animal/pets:notexist"
    exists: false
    xmlNamespaces:
      env: "http://schemas.xmlsoap.org/soap/envelope/"
      pets: "urn:com:example:petstore"
  response:
    statusCode: 202
